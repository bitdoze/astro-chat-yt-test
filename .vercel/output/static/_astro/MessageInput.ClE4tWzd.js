import{w as b,b as p,a as h,j as e,c as x}from"./clsx.Cy8qdI5f.js";import{r}from"./index.DtoOFyvK.js";function y(){const g=p(h.messages.sendMessage),[s,l]=r.useState(""),[a,i]=r.useState(""),[o,d]=r.useState(!1),[c,n]=r.useState(null),m=r.useRef(null);r.useEffect(()=>{const t=localStorage.getItem("chat-author-name");t&&l(t)},[]),r.useEffect(()=>{s&&localStorage.setItem("chat-author-name",s)},[s]);const f=async t=>{if(t.preventDefault(),n(null),!s.trim()||!a.trim()){n("Please enter both your name and a message");return}d(!0);try{await g({author:s.trim(),body:a.trim()}),i(""),m.current?.focus()}catch(u){console.error("Failed to send message:",u),n(u instanceof Error?u.message:"Failed to send message")}finally{d(!1)}};return e.jsxs("div",{className:"border-t bg-white p-4",children:[c&&e.jsx("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:c}),e.jsxs("form",{onSubmit:f,className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Your name",value:s,onChange:t=>l(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:o})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:m,type:"text",placeholder:"Type your message...",value:a,onChange:t=>i(t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:o}),e.jsx("button",{type:"submit",disabled:o||!s.trim()||!a.trim(),className:x("px-6 py-2 rounded-lg font-medium transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",o||!s.trim()||!a.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send"})]})]})]})}const S=b(y);export{S as default};
